<div class="full-width" style="height: 50px">
    <h1 class="header-div">{{"handleManagerCampaign" | translate}} - {{name}}</h1>
    <div class="close-div">
        <button class="right-button" type="button" mat-icon-button (click)="onNoClick($event)">
            <mat-icon>
                <span class="material-symbols-outlined">
                    close
                </span>
            </mat-icon>
        </button>
    </div>
</div>
<h4 class="header-div" style="margin-top: 4px;">{{"campaignId" | translate}} - {{campaignId}}</h4>
<div class="add-button-div">
    <button type="button" style="width: 150px;" mat-raised-button color="primary" class="add-button"
        (click)="addManager()">
        <span *ngIf="!addNewManager"><mat-icon style="margin-top:11px;">add</mat-icon></span> <span *ngIf="!addNewManager"> {{'add' | translate}}</span>
        <span *ngIf="addNewManager"><mat-icon style="margin-top:11px;">remove</mat-icon></span> <span *ngIf="addNewManager"> {{'hide' | translate}}</span>
    </button>
</div>
<div *ngIf="addNewManager">
    <form [formGroup]="newManagerForm">
        <div class="in-line-forms">
            <mat-form-field class="full-dimension" appearance="fill">
                <mat-label>{{'email' | translate}}</mat-label>
                <input matInput id="email" formControlName="email">
            </mat-form-field>
        </div>
        <p *ngIf="!!errorMsgNewManager" class="full-dimension red-text">{{errorMsgNewManager | translate}}</p>
        <button type="submit" mat-raised-button color="primary" class="add-button" (click)="saveNewManager()">
            {{'save' | translate}}
        </button>
    </form>

</div>
<div class="full-width">
    <table mat-table [dataSource]="dataSource" class="full-width" matSort (matSortChange)="announceSortChange($event)">

        <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by email">
                 {{ 'email'| translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.manager.preferredUsername}} </td>
        </ng-container>

        <ng-container matColumnDef="role">
            <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by role"> 
                {{ 'role'| translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.manager.role| translate}} </td>
        </ng-container>

        <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef> {{ 'delete'| translate}} </th>
            <td mat-cell *matCellDef="let element">
                <button type="button" mat-icon-button (click)="deleteManager(element)">
                    <mat-icon>
                        <span class="material-icons-outlined">
                            delete
                        </span>
                    </mat-icon>
                </button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row
            [ngClass]="{'newItem': newManager && (newManager.manager.preferredUsername ===row.manager.preferredUsername)} "
            *matRowDef="let row; columns: displayedColumns;">
        </tr>
    </table>

    <mat-paginator [pageSizeOptions]="[50]" showFirstLastButtons>
    </mat-paginator>

</div>